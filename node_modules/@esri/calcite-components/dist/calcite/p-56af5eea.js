import{f as t,c as i,g as s}from"./p-cd8015fa.js";import{g as n}from"./p-0ae16e31.js";import{d as e}from"./p-58421494.js";import{h as r,H as a}from"./p-f8f51224.js";import{C as o}from"./p-39515aa9.js";function c(){this.setUpItems(),this.setUpFilter()}const h=["ArrowUp","ArrowDown"];function l(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=e(b.bind(this),0)}function f(){this.observer.observe(this.el,{childList:!0,subtree:!0})}function u(){this.observer.disconnect()}function d(t){const{selectedValues:i}=this,{item:s,value:n,selected:e,shiftPressed:r}=t.detail;e?(this.multiple||this.deselectSiblingItems(s),this.multiple&&r&&this.selectSiblings(s),i.set(n,s)):(i.delete(n),this.multiple&&r&&this.selectSiblings(s,!0)),this.multiple||g(s,e),this.lastSelectedItem=s,this.emitCalciteListChange()}function m(t){t.stopPropagation();const i=t.detail.oldValue,s=this.selectedValues;if(s.has(i)){const n=s.get(i);s.delete(i),s.set(t.detail.newValue,n)}}function p(i){const{key:s,target:e}=i;if(!function(t){return!!h.find((i=>i===t))}(s))return;const{items:r,multiple:a}=this,{length:o}=r,c=r.indexOf(e);if(!o||-1===c)return;i.preventDefault();const l=r[n(c+("ArrowUp"===s?-1:1),o)];g(l,!0),t(l),a||(l.selected=!0)}function b(){this.calciteListChange.emit(this.selectedValues)}function j(t){if(t.defaultPrevented)return;const i=t.target,s=this.selectedValues;"CALCITE-PICK-LIST-GROUP"===i.parentElement.tagName?(i.parentElement.remove(),Array.from(i.parentElement.children).forEach((t=>s.delete(t.value)))):(i.remove(),s.delete(i.value)),this.emitCalciteListChange()}function g(t,i){i?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1")}async function v(i){if(this.filterEnabled&&"filter"===i)return void(await t(this.filterEl));const{multiple:s,items:n}=this;if(0===n.length)return;if(s)return n[0].setFocus();return(n.find((t=>t.selected))||n[0]).setFocus()}function y(t){this.items=Array.from(this.el.querySelectorAll(t));let i=!1;const{items:s}=this;s.forEach((t=>{t.icon=this.getIconType(),this.multiple||(t.disableDeselect=!0,g(t,!1)),t.selected&&(i=!0,g(t,!0),this.selectedValues.set(t.value,t))}));const[n]=s;!i&&n&&g(n,!0)}function A(t){this.items.forEach((i=>{i.value!==t.value&&(i.toggleSelected(!1),this.selectedValues.has(i.value)&&this.selectedValues.delete(i.value))}))}function w(t,i=!1){if(!this.lastSelectedItem)return;const{items:s}=this,n=s.findIndex((t=>t.value===this.lastSelectedItem.value)),e=s.findIndex((i=>i.value===t.value));s.slice(Math.min(n,e),Math.max(n,e)).forEach((t=>{t.toggleSelected(!i),i?this.selectedValues.delete(t.value):this.selectedValues.set(t.value,t)}))}let C;function O(t){const s=t.detail.map((t=>t.value));let n=!1;C||(C=new Set);const e=this.items.filter((t=>{const i=t.parentElement;i.matches("calcite-pick-list-group")&&C.add(i);const e=s.includes(t.value);return t.hidden=!e,n||(n=e&&t.selected),e}));C.forEach((t=>{const s=e.some((i=>t.contains(i)));if(t.hidden=!s,!s)return;const n=i(t,"parent-item");n&&(n.hidden=!1,e.includes(n)&&Array.from(t.children).forEach((t=>t.hidden=!1)))})),C.clear(),e.length>0&&!n&&!this.multiple&&g(e[0],!0)}function F(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}const L=t=>{var{props:{disabled:i,loading:n,filterEnabled:e,dataForFilter:c,handleFilter:h,filterPlaceholder:l,el:f,setFilterEl:u,theme:d}}=t,m=function(t,i){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&i.indexOf(n)<0&&(s[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(t,n[e])&&(s[n[e]]=t[n[e]])}return s}(t,["props"]);const p=r("slot",null);return r(a,Object.assign({"aria-busy":n.toString(),"aria-disabled":i.toString(),role:"menu"},m),r("section",null,r("header",{class:{[o.sticky]:!0}},e?r("calcite-filter",{"aria-label":l,data:c,dir:s(f),disabled:n||i,onCalciteFilterChange:h,placeholder:l,ref:u}):null,r("slot",{name:"menu-actions"})),n||i?r("calcite-scrim",{loading:n,theme:d}):null,p))};export{L,f as a,d as b,u as c,A as d,m as e,y as f,F as g,O as h,l as i,v as j,p as k,c as m,j as r,w as s}